{"ast":null,"code":"\"use strict\";\n\nvar _Object$keys = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\nvar _forEachInstanceProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _setTimeout2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\nvar _promiseUtils = require(\"./promiseUtils\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys(object);\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var _context2, _context3;\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? _forEachInstanceProperty2(_context2 = ownKeys(Object(source), !0)).call(_context2, function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : _forEachInstanceProperty2(_context3 = ownKeys(Object(source))).call(_context3, function (key) {\n      _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n * @flow\n */\n/* global XMLHttpRequest, XDomainRequest */\nvar uuidv4 = require('./uuid');\n/*:: export type RequestOptions = {\n  useMasterKey?: boolean,\n  sessionToken?: string,\n  installationId?: string,\n  returnStatus?: boolean,\n  batchSize?: number,\n  include?: any,\n  progress?: any,\n  context?: any,\n  usePost?: boolean,\n};*/\n/*:: export type FullOptions = {\n  success?: any,\n  error?: any,\n  useMasterKey?: boolean,\n  sessionToken?: string,\n  installationId?: string,\n  progress?: any,\n  usePost?: boolean,\n};*/\nvar XHR = null;\nif (typeof XMLHttpRequest !== 'undefined') {\n  XHR = XMLHttpRequest;\n}\nvar useXDomainRequest = false;\nif (typeof XDomainRequest !== 'undefined' && !('withCredentials' in new XMLHttpRequest())) {\n  useXDomainRequest = true;\n}\nfunction ajaxIE9(method /*: string*/, url /*: string*/, data /*: any*/, headers /*:: ?: any*/, options /*:: ?: FullOptions*/) {\n  return new _promise.default(function (resolve, reject) {\n    var xdr = new XDomainRequest();\n    xdr.onload = function () {\n      var response;\n      try {\n        response = JSON.parse(xdr.responseText);\n      } catch (e) {\n        reject(e);\n      }\n      if (response) {\n        resolve({\n          response: response\n        });\n      }\n    };\n    xdr.onerror = xdr.ontimeout = function () {\n      // Let's fake a real error message.\n      var fakeResponse = {\n        responseText: (0, _stringify.default)({\n          code: _ParseError.default.X_DOMAIN_REQUEST,\n          error: \"IE's XDomainRequest does not supply error info.\"\n        })\n      };\n      reject(fakeResponse);\n    };\n    xdr.onprogress = function () {\n      if (options && typeof options.progress === 'function') {\n        options.progress(xdr.responseText);\n      }\n    };\n    xdr.open(method, url);\n    xdr.send(data);\n    if (options && typeof options.requestTask === 'function') {\n      options.requestTask(xdr);\n    }\n  });\n}\nvar RESTController = {\n  ajax: function (method /*: string*/, url /*: string*/, data /*: any*/, headers /*:: ?: any*/, options /*:: ?: FullOptions*/) {\n    var _context;\n    if (useXDomainRequest) {\n      return ajaxIE9(method, url, data, headers, options);\n    }\n    var promise = (0, _promiseUtils.resolvingPromise)();\n    var isIdempotent = _CoreManager.default.get('IDEMPOTENCY') && (0, _includes.default)(_context = ['POST', 'PUT']).call(_context, method);\n    var requestId = isIdempotent ? uuidv4() : '';\n    var attempts = 0;\n    (function dispatch() {\n      if (XHR == null) {\n        throw new Error('Cannot make a request: No definition of XMLHttpRequest was found.');\n      }\n      var handled = false;\n      var xhr = new XHR();\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState !== 4 || handled || xhr._aborted) {\n          return;\n        }\n        handled = true;\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.responseText);\n            headers = {};\n            if (typeof xhr.getResponseHeader === 'function' && xhr.getResponseHeader('access-control-expose-headers')) {\n              var responseHeaders = xhr.getResponseHeader('access-control-expose-headers').split(', ');\n              (0, _forEach.default)(responseHeaders).call(responseHeaders, function (header) {\n                headers[header] = xhr.getResponseHeader(header.toLowerCase());\n              });\n            }\n          } catch (e) {\n            promise.reject(e.toString());\n          }\n          if (response) {\n            promise.resolve({\n              response: response,\n              headers: headers,\n              status: xhr.status,\n              xhr: xhr\n            });\n          }\n        } else if (xhr.status >= 500 || xhr.status === 0) {\n          // retry on 5XX or node-xmlhttprequest error\n          if (++attempts < _CoreManager.default.get('REQUEST_ATTEMPT_LIMIT')) {\n            // Exponentially-growing random delay\n            var delay = Math.round(Math.random() * 125 * Math.pow(2, attempts));\n            (0, _setTimeout2.default)(dispatch, delay);\n          } else if (xhr.status === 0) {\n            promise.reject('Unable to connect to the Parse API');\n          } else {\n            // After the retry limit is reached, fail\n            promise.reject(xhr);\n          }\n        } else {\n          promise.reject(xhr);\n        }\n      };\n      headers = headers || {};\n      if (typeof headers['Content-Type'] !== 'string') {\n        headers['Content-Type'] = 'text/plain'; // Avoid pre-flight\n      }\n      if (_CoreManager.default.get('IS_NODE')) {\n        headers['User-Agent'] = 'Parse/' + _CoreManager.default.get('VERSION') + ' (NodeJS ' + process.versions.node + ')';\n      }\n      if (isIdempotent) {\n        headers['X-Parse-Request-Id'] = requestId;\n      }\n      if (_CoreManager.default.get('SERVER_AUTH_TYPE') && _CoreManager.default.get('SERVER_AUTH_TOKEN')) {\n        headers['Authorization'] = _CoreManager.default.get('SERVER_AUTH_TYPE') + ' ' + _CoreManager.default.get('SERVER_AUTH_TOKEN');\n      }\n      var customHeaders = _CoreManager.default.get('REQUEST_HEADERS');\n      for (var key in customHeaders) {\n        headers[key] = customHeaders[key];\n      }\n      if (options && typeof options.progress === 'function') {\n        var handleProgress = function handleProgress(type, event) {\n          if (event.lengthComputable) {\n            options.progress(event.loaded / event.total, event.loaded, event.total, {\n              type: type\n            });\n          } else {\n            options.progress(null, null, null, {\n              type: type\n            });\n          }\n        };\n        xhr.onprogress = function (event) {\n          handleProgress('download', event);\n        };\n        if (xhr.upload) {\n          xhr.upload.onprogress = function (event) {\n            handleProgress('upload', event);\n          };\n        }\n      }\n      xhr.open(method, url, true);\n      for (var h in headers) {\n        xhr.setRequestHeader(h, headers[h]);\n      }\n      xhr.onabort = function () {\n        promise.resolve({\n          response: {\n            results: []\n          },\n          status: 0,\n          xhr: xhr\n        });\n      };\n      xhr.send(data);\n      if (options && typeof options.requestTask === 'function') {\n        options.requestTask(xhr);\n      }\n    })();\n    return promise;\n  },\n  request: function request(method /*: string*/, path /*: string*/, data /*: mixed*/, options /*:: ?: RequestOptions*/) {\n    options = options || {};\n    var url = _CoreManager.default.get('SERVER_URL');\n    if (url[url.length - 1] !== '/') {\n      url += '/';\n    }\n    url += path;\n    var payload = {};\n    if (data && (0, _typeof2.default)(data) === 'object') {\n      for (var k in data) {\n        payload[k] = data[k];\n      }\n    }\n\n    // Add context\n    var context = options.context;\n    if (context !== undefined) {\n      payload._context = context;\n    }\n    if (method !== 'POST') {\n      payload._method = method;\n      method = 'POST';\n    }\n    payload._ApplicationId = _CoreManager.default.get('APPLICATION_ID');\n    var jsKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n    if (jsKey) {\n      payload._JavaScriptKey = jsKey;\n    }\n    payload._ClientVersion = _CoreManager.default.get('VERSION');\n    var useMasterKey = options.useMasterKey;\n    if (typeof useMasterKey === 'undefined') {\n      useMasterKey = _CoreManager.default.get('USE_MASTER_KEY');\n    }\n    if (useMasterKey) {\n      if (_CoreManager.default.get('MASTER_KEY')) {\n        delete payload._JavaScriptKey;\n        payload._MasterKey = _CoreManager.default.get('MASTER_KEY');\n      } else {\n        throw new Error('Cannot use the Master Key, it has not been provided.');\n      }\n    }\n    if (_CoreManager.default.get('FORCE_REVOCABLE_SESSION')) {\n      payload._RevocableSession = '1';\n    }\n    var installationId = options.installationId;\n    var installationIdPromise;\n    if (installationId && typeof installationId === 'string') {\n      installationIdPromise = _promise.default.resolve(installationId);\n    } else {\n      var installationController = _CoreManager.default.getInstallationController();\n      installationIdPromise = installationController.currentInstallationId();\n    }\n    return installationIdPromise.then(function (iid) {\n      payload._InstallationId = iid;\n      var userController = _CoreManager.default.getUserController();\n      if (options && typeof options.sessionToken === 'string') {\n        return _promise.default.resolve(options.sessionToken);\n      } else if (userController) {\n        return userController.currentUserAsync().then(function (user) {\n          if (user) {\n            return _promise.default.resolve(user.getSessionToken());\n          }\n          return _promise.default.resolve(null);\n        });\n      }\n      return _promise.default.resolve(null);\n    }).then(function (token) {\n      if (token) {\n        payload._SessionToken = token;\n      }\n      var payloadString = (0, _stringify.default)(payload);\n      return RESTController.ajax(method, url, payloadString, {}, options).then(function (_ref) {\n        var response = _ref.response,\n          status = _ref.status,\n          headers = _ref.headers,\n          xhr = _ref.xhr;\n        if (options.returnStatus) {\n          return _objectSpread(_objectSpread({}, response), {}, {\n            _status: status,\n            _headers: headers,\n            _xhr: xhr\n          });\n        } else {\n          return response;\n        }\n      });\n    }).catch(RESTController.handleError);\n  },\n  handleError: function handleError(response) {\n    // Transform the error into an instance of ParseError by trying to parse\n    // the error string as JSON\n    var error;\n    if (response && response.responseText) {\n      try {\n        var errorJSON = JSON.parse(response.responseText);\n        error = new _ParseError.default(errorJSON.code, errorJSON.error);\n      } catch (e) {\n        // If we fail to parse the error text, that's okay.\n        error = new _ParseError.default(_ParseError.default.INVALID_JSON, 'Received an error with invalid JSON from Parse: ' + response.responseText);\n      }\n    } else {\n      var message = response.message ? response.message : response;\n      error = new _ParseError.default(_ParseError.default.CONNECTION_FAILED, 'XMLHttpRequest failed: ' + (0, _stringify.default)(message));\n    }\n    return _promise.default.reject(error);\n  },\n  _setXHR: function _setXHR(xhr /*: any*/) {\n    XHR = xhr;\n  },\n  _getXHR: function _getXHR() {\n    return XHR;\n  }\n};\nmodule.exports = RESTController;","map":{"version":3,"names":["_Object$keys","require","_Object$getOwnPropertySymbols","_filterInstanceProperty","_Object$getOwnPropertyDescriptor","_forEachInstanceProperty2","_Object$getOwnPropertyDescriptors","_Object$defineProperties","_Object$defineProperty","_interopRequireDefault","_defineProperty2","_typeof2","_promise","_stringify","_includes","_forEach","_setTimeout2","_CoreManager","_ParseError","_promiseUtils","ownKeys","object","enumerableOnly","keys","symbols","call","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","_context2","_context3","source","Object","key","default","uuidv4","XHR","XMLHttpRequest","useXDomainRequest","XDomainRequest","ajaxIE9","method","url","data","headers","options","resolve","reject","xdr","onload","response","JSON","parse","responseText","e","onerror","ontimeout","fakeResponse","code","X_DOMAIN_REQUEST","error","onprogress","progress","open","send","requestTask","RESTController","ajax","_context","promise","resolvingPromise","isIdempotent","get","requestId","attempts","dispatch","Error","handled","xhr","onreadystatechange","readyState","_aborted","status","getResponseHeader","responseHeaders","split","header","toLowerCase","toString","delay","Math","round","random","pow","process","versions","node","customHeaders","handleProgress","type","event","lengthComputable","loaded","total","upload","h","setRequestHeader","onabort","results","request","path","payload","k","context","undefined","_method","_ApplicationId","jsKey","_JavaScriptKey","_ClientVersion","useMasterKey","_MasterKey","_RevocableSession","installationId","installationIdPromise","installationController","getInstallationController","currentInstallationId","then","iid","_InstallationId","userController","getUserController","sessionToken","currentUserAsync","user","getSessionToken","token","_SessionToken","payloadString","_ref","returnStatus","_status","_headers","_xhr","catch","handleError","errorJSON","INVALID_JSON","message","CONNECTION_FAILED","_setXHR","_getXHR","module","exports"],"sources":["C:/Users/adasa/Desktop/devblrProject/webdev-project/node_modules/parse/lib/browser/RESTController.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$keys = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\nvar _forEachInstanceProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _setTimeout2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\nvar _promiseUtils = require(\"./promiseUtils\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys(object);\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var _context2, _context3;\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? _forEachInstanceProperty2(_context2 = ownKeys(Object(source), !0)).call(_context2, function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : _forEachInstanceProperty2(_context3 = ownKeys(Object(source))).call(_context3, function (key) {\n      _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n * @flow\n */\n/* global XMLHttpRequest, XDomainRequest */\nvar uuidv4 = require('./uuid');\n/*:: export type RequestOptions = {\n  useMasterKey?: boolean,\n  sessionToken?: string,\n  installationId?: string,\n  returnStatus?: boolean,\n  batchSize?: number,\n  include?: any,\n  progress?: any,\n  context?: any,\n  usePost?: boolean,\n};*/\n/*:: export type FullOptions = {\n  success?: any,\n  error?: any,\n  useMasterKey?: boolean,\n  sessionToken?: string,\n  installationId?: string,\n  progress?: any,\n  usePost?: boolean,\n};*/\nvar XHR = null;\nif (typeof XMLHttpRequest !== 'undefined') {\n  XHR = XMLHttpRequest;\n}\nvar useXDomainRequest = false;\nif (typeof XDomainRequest !== 'undefined' && !('withCredentials' in new XMLHttpRequest())) {\n  useXDomainRequest = true;\n}\nfunction ajaxIE9(method /*: string*/, url /*: string*/, data /*: any*/, headers /*:: ?: any*/, options /*:: ?: FullOptions*/) {\n  return new _promise.default(function (resolve, reject) {\n    var xdr = new XDomainRequest();\n    xdr.onload = function () {\n      var response;\n      try {\n        response = JSON.parse(xdr.responseText);\n      } catch (e) {\n        reject(e);\n      }\n      if (response) {\n        resolve({\n          response: response\n        });\n      }\n    };\n    xdr.onerror = xdr.ontimeout = function () {\n      // Let's fake a real error message.\n      var fakeResponse = {\n        responseText: (0, _stringify.default)({\n          code: _ParseError.default.X_DOMAIN_REQUEST,\n          error: \"IE's XDomainRequest does not supply error info.\"\n        })\n      };\n      reject(fakeResponse);\n    };\n    xdr.onprogress = function () {\n      if (options && typeof options.progress === 'function') {\n        options.progress(xdr.responseText);\n      }\n    };\n    xdr.open(method, url);\n    xdr.send(data);\n    if (options && typeof options.requestTask === 'function') {\n      options.requestTask(xdr);\n    }\n  });\n}\nvar RESTController = {\n  ajax: function (method /*: string*/, url /*: string*/, data /*: any*/, headers /*:: ?: any*/, options /*:: ?: FullOptions*/) {\n    var _context;\n    if (useXDomainRequest) {\n      return ajaxIE9(method, url, data, headers, options);\n    }\n    var promise = (0, _promiseUtils.resolvingPromise)();\n    var isIdempotent = _CoreManager.default.get('IDEMPOTENCY') && (0, _includes.default)(_context = ['POST', 'PUT']).call(_context, method);\n    var requestId = isIdempotent ? uuidv4() : '';\n    var attempts = 0;\n    (function dispatch() {\n      if (XHR == null) {\n        throw new Error('Cannot make a request: No definition of XMLHttpRequest was found.');\n      }\n      var handled = false;\n      var xhr = new XHR();\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState !== 4 || handled || xhr._aborted) {\n          return;\n        }\n        handled = true;\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.responseText);\n            headers = {};\n            if (typeof xhr.getResponseHeader === 'function' && xhr.getResponseHeader('access-control-expose-headers')) {\n              var responseHeaders = xhr.getResponseHeader('access-control-expose-headers').split(', ');\n              (0, _forEach.default)(responseHeaders).call(responseHeaders, function (header) {\n                headers[header] = xhr.getResponseHeader(header.toLowerCase());\n              });\n            }\n          } catch (e) {\n            promise.reject(e.toString());\n          }\n          if (response) {\n            promise.resolve({\n              response: response,\n              headers: headers,\n              status: xhr.status,\n              xhr: xhr\n            });\n          }\n        } else if (xhr.status >= 500 || xhr.status === 0) {\n          // retry on 5XX or node-xmlhttprequest error\n          if (++attempts < _CoreManager.default.get('REQUEST_ATTEMPT_LIMIT')) {\n            // Exponentially-growing random delay\n            var delay = Math.round(Math.random() * 125 * Math.pow(2, attempts));\n            (0, _setTimeout2.default)(dispatch, delay);\n          } else if (xhr.status === 0) {\n            promise.reject('Unable to connect to the Parse API');\n          } else {\n            // After the retry limit is reached, fail\n            promise.reject(xhr);\n          }\n        } else {\n          promise.reject(xhr);\n        }\n      };\n      headers = headers || {};\n      if (typeof headers['Content-Type'] !== 'string') {\n        headers['Content-Type'] = 'text/plain'; // Avoid pre-flight\n      }\n\n      if (_CoreManager.default.get('IS_NODE')) {\n        headers['User-Agent'] = 'Parse/' + _CoreManager.default.get('VERSION') + ' (NodeJS ' + process.versions.node + ')';\n      }\n      if (isIdempotent) {\n        headers['X-Parse-Request-Id'] = requestId;\n      }\n      if (_CoreManager.default.get('SERVER_AUTH_TYPE') && _CoreManager.default.get('SERVER_AUTH_TOKEN')) {\n        headers['Authorization'] = _CoreManager.default.get('SERVER_AUTH_TYPE') + ' ' + _CoreManager.default.get('SERVER_AUTH_TOKEN');\n      }\n      var customHeaders = _CoreManager.default.get('REQUEST_HEADERS');\n      for (var key in customHeaders) {\n        headers[key] = customHeaders[key];\n      }\n      if (options && typeof options.progress === 'function') {\n        var handleProgress = function handleProgress(type, event) {\n          if (event.lengthComputable) {\n            options.progress(event.loaded / event.total, event.loaded, event.total, {\n              type: type\n            });\n          } else {\n            options.progress(null, null, null, {\n              type: type\n            });\n          }\n        };\n        xhr.onprogress = function (event) {\n          handleProgress('download', event);\n        };\n        if (xhr.upload) {\n          xhr.upload.onprogress = function (event) {\n            handleProgress('upload', event);\n          };\n        }\n      }\n      xhr.open(method, url, true);\n      for (var h in headers) {\n        xhr.setRequestHeader(h, headers[h]);\n      }\n      xhr.onabort = function () {\n        promise.resolve({\n          response: {\n            results: []\n          },\n          status: 0,\n          xhr: xhr\n        });\n      };\n      xhr.send(data);\n      if (options && typeof options.requestTask === 'function') {\n        options.requestTask(xhr);\n      }\n    })();\n    return promise;\n  },\n  request: function request(method /*: string*/, path /*: string*/, data /*: mixed*/, options /*:: ?: RequestOptions*/) {\n    options = options || {};\n    var url = _CoreManager.default.get('SERVER_URL');\n    if (url[url.length - 1] !== '/') {\n      url += '/';\n    }\n    url += path;\n    var payload = {};\n    if (data && (0, _typeof2.default)(data) === 'object') {\n      for (var k in data) {\n        payload[k] = data[k];\n      }\n    }\n\n    // Add context\n    var context = options.context;\n    if (context !== undefined) {\n      payload._context = context;\n    }\n    if (method !== 'POST') {\n      payload._method = method;\n      method = 'POST';\n    }\n    payload._ApplicationId = _CoreManager.default.get('APPLICATION_ID');\n    var jsKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n    if (jsKey) {\n      payload._JavaScriptKey = jsKey;\n    }\n    payload._ClientVersion = _CoreManager.default.get('VERSION');\n    var useMasterKey = options.useMasterKey;\n    if (typeof useMasterKey === 'undefined') {\n      useMasterKey = _CoreManager.default.get('USE_MASTER_KEY');\n    }\n    if (useMasterKey) {\n      if (_CoreManager.default.get('MASTER_KEY')) {\n        delete payload._JavaScriptKey;\n        payload._MasterKey = _CoreManager.default.get('MASTER_KEY');\n      } else {\n        throw new Error('Cannot use the Master Key, it has not been provided.');\n      }\n    }\n    if (_CoreManager.default.get('FORCE_REVOCABLE_SESSION')) {\n      payload._RevocableSession = '1';\n    }\n    var installationId = options.installationId;\n    var installationIdPromise;\n    if (installationId && typeof installationId === 'string') {\n      installationIdPromise = _promise.default.resolve(installationId);\n    } else {\n      var installationController = _CoreManager.default.getInstallationController();\n      installationIdPromise = installationController.currentInstallationId();\n    }\n    return installationIdPromise.then(function (iid) {\n      payload._InstallationId = iid;\n      var userController = _CoreManager.default.getUserController();\n      if (options && typeof options.sessionToken === 'string') {\n        return _promise.default.resolve(options.sessionToken);\n      } else if (userController) {\n        return userController.currentUserAsync().then(function (user) {\n          if (user) {\n            return _promise.default.resolve(user.getSessionToken());\n          }\n          return _promise.default.resolve(null);\n        });\n      }\n      return _promise.default.resolve(null);\n    }).then(function (token) {\n      if (token) {\n        payload._SessionToken = token;\n      }\n      var payloadString = (0, _stringify.default)(payload);\n      return RESTController.ajax(method, url, payloadString, {}, options).then(function (_ref) {\n        var response = _ref.response,\n          status = _ref.status,\n          headers = _ref.headers,\n          xhr = _ref.xhr;\n        if (options.returnStatus) {\n          return _objectSpread(_objectSpread({}, response), {}, {\n            _status: status,\n            _headers: headers,\n            _xhr: xhr\n          });\n        } else {\n          return response;\n        }\n      });\n    }).catch(RESTController.handleError);\n  },\n  handleError: function handleError(response) {\n    // Transform the error into an instance of ParseError by trying to parse\n    // the error string as JSON\n    var error;\n    if (response && response.responseText) {\n      try {\n        var errorJSON = JSON.parse(response.responseText);\n        error = new _ParseError.default(errorJSON.code, errorJSON.error);\n      } catch (e) {\n        // If we fail to parse the error text, that's okay.\n        error = new _ParseError.default(_ParseError.default.INVALID_JSON, 'Received an error with invalid JSON from Parse: ' + response.responseText);\n      }\n    } else {\n      var message = response.message ? response.message : response;\n      error = new _ParseError.default(_ParseError.default.CONNECTION_FAILED, 'XMLHttpRequest failed: ' + (0, _stringify.default)(message));\n    }\n    return _promise.default.reject(error);\n  },\n  _setXHR: function _setXHR(xhr /*: any*/) {\n    XHR = xhr;\n  },\n  _getXHR: function _getXHR() {\n    return XHR;\n  }\n};\nmodule.exports = RESTController;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,YAAY,GAAGC,OAAO,CAAC,mDAAmD,CAAC;AAC/E,IAAIC,6BAA6B,GAAGD,OAAO,CAAC,uEAAuE,CAAC;AACpH,IAAIE,uBAAuB,GAAGF,OAAO,CAAC,uDAAuD,CAAC;AAC9F,IAAIG,gCAAgC,GAAGH,OAAO,CAAC,0EAA0E,CAAC;AAC1H,IAAII,yBAAyB,GAAGJ,OAAO,CAAC,yDAAyD,CAAC;AAClG,IAAIK,iCAAiC,GAAGL,OAAO,CAAC,2EAA2E,CAAC;AAC5H,IAAIM,wBAAwB,GAAGN,OAAO,CAAC,gEAAgE,CAAC;AACxG,IAAIO,sBAAsB,GAAGP,OAAO,CAAC,8DAA8D,CAAC;AACpG,IAAIQ,sBAAsB,GAAGR,OAAO,CAAC,sDAAsD,CAAC;AAC5F,IAAIS,gBAAgB,GAAGD,sBAAsB,CAACR,OAAO,CAAC,+CAA+C,CAAC,CAAC;AACvG,IAAIU,QAAQ,GAAGF,sBAAsB,CAACR,OAAO,CAAC,uCAAuC,CAAC,CAAC;AACvF,IAAIW,QAAQ,GAAGH,sBAAsB,CAACR,OAAO,CAAC,+CAA+C,CAAC,CAAC;AAC/F,IAAIY,UAAU,GAAGJ,sBAAsB,CAACR,OAAO,CAAC,sDAAsD,CAAC,CAAC;AACxG,IAAIa,SAAS,GAAGL,sBAAsB,CAACR,OAAO,CAAC,yDAAyD,CAAC,CAAC;AAC1G,IAAIc,QAAQ,GAAGN,sBAAsB,CAACR,OAAO,CAAC,yDAAyD,CAAC,CAAC;AACzG,IAAIe,YAAY,GAAGP,sBAAsB,CAACR,OAAO,CAAC,mDAAmD,CAAC,CAAC;AACvG,IAAIgB,YAAY,GAAGR,sBAAsB,CAACR,OAAO,CAAC,eAAe,CAAC,CAAC;AACnE,IAAIiB,WAAW,GAAGT,sBAAsB,CAACR,OAAO,CAAC,cAAc,CAAC,CAAC;AACjE,IAAIkB,aAAa,GAAGlB,OAAO,CAAC,gBAAgB,CAAC;AAC7C,SAASmB,OAAOA,CAACC,MAAM,EAAEC,cAAc,EAAE;EACvC,IAAIC,IAAI,GAAGvB,YAAY,CAACqB,MAAM,CAAC;EAC/B,IAAInB,6BAA6B,EAAE;IACjC,IAAIsB,OAAO,GAAGtB,6BAA6B,CAACmB,MAAM,CAAC;IACnDC,cAAc,KAAKE,OAAO,GAAGrB,uBAAuB,CAACqB,OAAO,CAAC,CAACC,IAAI,CAACD,OAAO,EAAE,UAAUE,GAAG,EAAE;MACzF,OAAOtB,gCAAgC,CAACiB,MAAM,EAAEK,GAAG,CAAC,CAACC,UAAU;IACjE,CAAC,CAAC,CAAC,EAAEJ,IAAI,CAACK,IAAI,CAACC,KAAK,CAACN,IAAI,EAAEC,OAAO,CAAC;EACrC;EACA,OAAOD,IAAI;AACb;AACA,SAASO,aAAaA,CAACC,MAAM,EAAE;EAC7B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;IACzC,IAAIG,SAAS,EAAEC,SAAS;IACxB,IAAIC,MAAM,GAAG,IAAI,IAAIJ,SAAS,CAACD,CAAC,CAAC,GAAGC,SAAS,CAACD,CAAC,CAAC,GAAG,CAAC,CAAC;IACrDA,CAAC,GAAG,CAAC,GAAG3B,yBAAyB,CAAC8B,SAAS,GAAGf,OAAO,CAACkB,MAAM,CAACD,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAACZ,IAAI,CAACU,SAAS,EAAE,UAAUI,GAAG,EAAE;MACxG,CAAC,CAAC,EAAE7B,gBAAgB,CAAC8B,OAAO,EAAET,MAAM,EAAEQ,GAAG,EAAEF,MAAM,CAACE,GAAG,CAAC,CAAC;IACzD,CAAC,CAAC,GAAGjC,iCAAiC,GAAGC,wBAAwB,CAACwB,MAAM,EAAEzB,iCAAiC,CAAC+B,MAAM,CAAC,CAAC,GAAGhC,yBAAyB,CAAC+B,SAAS,GAAGhB,OAAO,CAACkB,MAAM,CAACD,MAAM,CAAC,CAAC,CAAC,CAACZ,IAAI,CAACW,SAAS,EAAE,UAAUG,GAAG,EAAE;MACnN/B,sBAAsB,CAACuB,MAAM,EAAEQ,GAAG,EAAEnC,gCAAgC,CAACiC,MAAM,EAAEE,GAAG,CAAC,CAAC;IACpF,CAAC,CAAC;EACJ;EACA,OAAOR,MAAM;AACf;AACA;AACA;AACA;AACA;AACA,IAAIU,MAAM,GAAGxC,OAAO,CAAC,QAAQ,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIyC,GAAG,GAAG,IAAI;AACd,IAAI,OAAOC,cAAc,KAAK,WAAW,EAAE;EACzCD,GAAG,GAAGC,cAAc;AACtB;AACA,IAAIC,iBAAiB,GAAG,KAAK;AAC7B,IAAI,OAAOC,cAAc,KAAK,WAAW,IAAI,EAAE,iBAAiB,IAAI,IAAIF,cAAc,CAAC,CAAC,CAAC,EAAE;EACzFC,iBAAiB,GAAG,IAAI;AAC1B;AACA,SAASE,OAAOA,CAACC,MAAM,CAAC,cAAcC,GAAG,CAAC,cAAcC,IAAI,CAAC,WAAWC,OAAO,CAAC,eAAeC,OAAO,CAAC,uBAAuB;EAC5H,OAAO,IAAIvC,QAAQ,CAAC4B,OAAO,CAAC,UAAUY,OAAO,EAAEC,MAAM,EAAE;IACrD,IAAIC,GAAG,GAAG,IAAIT,cAAc,CAAC,CAAC;IAC9BS,GAAG,CAACC,MAAM,GAAG,YAAY;MACvB,IAAIC,QAAQ;MACZ,IAAI;QACFA,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,YAAY,CAAC;MACzC,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVP,MAAM,CAACO,CAAC,CAAC;MACX;MACA,IAAIJ,QAAQ,EAAE;QACZJ,OAAO,CAAC;UACNI,QAAQ,EAAEA;QACZ,CAAC,CAAC;MACJ;IACF,CAAC;IACDF,GAAG,CAACO,OAAO,GAAGP,GAAG,CAACQ,SAAS,GAAG,YAAY;MACxC;MACA,IAAIC,YAAY,GAAG;QACjBJ,YAAY,EAAE,CAAC,CAAC,EAAE9C,UAAU,CAAC2B,OAAO,EAAE;UACpCwB,IAAI,EAAE9C,WAAW,CAACsB,OAAO,CAACyB,gBAAgB;UAC1CC,KAAK,EAAE;QACT,CAAC;MACH,CAAC;MACDb,MAAM,CAACU,YAAY,CAAC;IACtB,CAAC;IACDT,GAAG,CAACa,UAAU,GAAG,YAAY;MAC3B,IAAIhB,OAAO,IAAI,OAAOA,OAAO,CAACiB,QAAQ,KAAK,UAAU,EAAE;QACrDjB,OAAO,CAACiB,QAAQ,CAACd,GAAG,CAACK,YAAY,CAAC;MACpC;IACF,CAAC;IACDL,GAAG,CAACe,IAAI,CAACtB,MAAM,EAAEC,GAAG,CAAC;IACrBM,GAAG,CAACgB,IAAI,CAACrB,IAAI,CAAC;IACd,IAAIE,OAAO,IAAI,OAAOA,OAAO,CAACoB,WAAW,KAAK,UAAU,EAAE;MACxDpB,OAAO,CAACoB,WAAW,CAACjB,GAAG,CAAC;IAC1B;EACF,CAAC,CAAC;AACJ;AACA,IAAIkB,cAAc,GAAG;EACnBC,IAAI,EAAE,SAAAA,CAAU1B,MAAM,CAAC,cAAcC,GAAG,CAAC,cAAcC,IAAI,CAAC,WAAWC,OAAO,CAAC,eAAeC,OAAO,CAAC,uBAAuB;IAC3H,IAAIuB,QAAQ;IACZ,IAAI9B,iBAAiB,EAAE;MACrB,OAAOE,OAAO,CAACC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,OAAO,CAAC;IACrD;IACA,IAAIwB,OAAO,GAAG,CAAC,CAAC,EAAExD,aAAa,CAACyD,gBAAgB,EAAE,CAAC;IACnD,IAAIC,YAAY,GAAG5D,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,EAAEhE,SAAS,CAAC0B,OAAO,EAAEkC,QAAQ,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAACjD,IAAI,CAACiD,QAAQ,EAAE3B,MAAM,CAAC;IACvI,IAAIgC,SAAS,GAAGF,YAAY,GAAGpC,MAAM,CAAC,CAAC,GAAG,EAAE;IAC5C,IAAIuC,QAAQ,GAAG,CAAC;IAChB,CAAC,SAASC,QAAQA,CAAA,EAAG;MACnB,IAAIvC,GAAG,IAAI,IAAI,EAAE;QACf,MAAM,IAAIwC,KAAK,CAAC,mEAAmE,CAAC;MACtF;MACA,IAAIC,OAAO,GAAG,KAAK;MACnB,IAAIC,GAAG,GAAG,IAAI1C,GAAG,CAAC,CAAC;MACnB0C,GAAG,CAACC,kBAAkB,GAAG,YAAY;QACnC,IAAID,GAAG,CAACE,UAAU,KAAK,CAAC,IAAIH,OAAO,IAAIC,GAAG,CAACG,QAAQ,EAAE;UACnD;QACF;QACAJ,OAAO,GAAG,IAAI;QACd,IAAIC,GAAG,CAACI,MAAM,IAAI,GAAG,IAAIJ,GAAG,CAACI,MAAM,GAAG,GAAG,EAAE;UACzC,IAAIhC,QAAQ;UACZ,IAAI;YACFA,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAAC0B,GAAG,CAACzB,YAAY,CAAC;YACvCT,OAAO,GAAG,CAAC,CAAC;YACZ,IAAI,OAAOkC,GAAG,CAACK,iBAAiB,KAAK,UAAU,IAAIL,GAAG,CAACK,iBAAiB,CAAC,+BAA+B,CAAC,EAAE;cACzG,IAAIC,eAAe,GAAGN,GAAG,CAACK,iBAAiB,CAAC,+BAA+B,CAAC,CAACE,KAAK,CAAC,IAAI,CAAC;cACxF,CAAC,CAAC,EAAE5E,QAAQ,CAACyB,OAAO,EAAEkD,eAAe,CAAC,CAACjE,IAAI,CAACiE,eAAe,EAAE,UAAUE,MAAM,EAAE;gBAC7E1C,OAAO,CAAC0C,MAAM,CAAC,GAAGR,GAAG,CAACK,iBAAiB,CAACG,MAAM,CAACC,WAAW,CAAC,CAAC,CAAC;cAC/D,CAAC,CAAC;YACJ;UACF,CAAC,CAAC,OAAOjC,CAAC,EAAE;YACVe,OAAO,CAACtB,MAAM,CAACO,CAAC,CAACkC,QAAQ,CAAC,CAAC,CAAC;UAC9B;UACA,IAAItC,QAAQ,EAAE;YACZmB,OAAO,CAACvB,OAAO,CAAC;cACdI,QAAQ,EAAEA,QAAQ;cAClBN,OAAO,EAAEA,OAAO;cAChBsC,MAAM,EAAEJ,GAAG,CAACI,MAAM;cAClBJ,GAAG,EAAEA;YACP,CAAC,CAAC;UACJ;QACF,CAAC,MAAM,IAAIA,GAAG,CAACI,MAAM,IAAI,GAAG,IAAIJ,GAAG,CAACI,MAAM,KAAK,CAAC,EAAE;UAChD;UACA,IAAI,EAAER,QAAQ,GAAG/D,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,uBAAuB,CAAC,EAAE;YAClE;YACA,IAAIiB,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,GAAGF,IAAI,CAACG,GAAG,CAAC,CAAC,EAAEnB,QAAQ,CAAC,CAAC;YACnE,CAAC,CAAC,EAAEhE,YAAY,CAACwB,OAAO,EAAEyC,QAAQ,EAAEc,KAAK,CAAC;UAC5C,CAAC,MAAM,IAAIX,GAAG,CAACI,MAAM,KAAK,CAAC,EAAE;YAC3Bb,OAAO,CAACtB,MAAM,CAAC,oCAAoC,CAAC;UACtD,CAAC,MAAM;YACL;YACAsB,OAAO,CAACtB,MAAM,CAAC+B,GAAG,CAAC;UACrB;QACF,CAAC,MAAM;UACLT,OAAO,CAACtB,MAAM,CAAC+B,GAAG,CAAC;QACrB;MACF,CAAC;MACDlC,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;MACvB,IAAI,OAAOA,OAAO,CAAC,cAAc,CAAC,KAAK,QAAQ,EAAE;QAC/CA,OAAO,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC,CAAC;MAC1C;MAEA,IAAIjC,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,SAAS,CAAC,EAAE;QACvC5B,OAAO,CAAC,YAAY,CAAC,GAAG,QAAQ,GAAGjC,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,SAAS,CAAC,GAAG,WAAW,GAAGsB,OAAO,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;MACpH;MACA,IAAIzB,YAAY,EAAE;QAChB3B,OAAO,CAAC,oBAAoB,CAAC,GAAG6B,SAAS;MAC3C;MACA,IAAI9D,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,kBAAkB,CAAC,IAAI7D,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,mBAAmB,CAAC,EAAE;QACjG5B,OAAO,CAAC,eAAe,CAAC,GAAGjC,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,kBAAkB,CAAC,GAAG,GAAG,GAAG7D,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,mBAAmB,CAAC;MAC/H;MACA,IAAIyB,aAAa,GAAGtF,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,iBAAiB,CAAC;MAC/D,KAAK,IAAIvC,GAAG,IAAIgE,aAAa,EAAE;QAC7BrD,OAAO,CAACX,GAAG,CAAC,GAAGgE,aAAa,CAAChE,GAAG,CAAC;MACnC;MACA,IAAIY,OAAO,IAAI,OAAOA,OAAO,CAACiB,QAAQ,KAAK,UAAU,EAAE;QACrD,IAAIoC,cAAc,GAAG,SAASA,cAAcA,CAACC,IAAI,EAAEC,KAAK,EAAE;UACxD,IAAIA,KAAK,CAACC,gBAAgB,EAAE;YAC1BxD,OAAO,CAACiB,QAAQ,CAACsC,KAAK,CAACE,MAAM,GAAGF,KAAK,CAACG,KAAK,EAAEH,KAAK,CAACE,MAAM,EAAEF,KAAK,CAACG,KAAK,EAAE;cACtEJ,IAAI,EAAEA;YACR,CAAC,CAAC;UACJ,CAAC,MAAM;YACLtD,OAAO,CAACiB,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;cACjCqC,IAAI,EAAEA;YACR,CAAC,CAAC;UACJ;QACF,CAAC;QACDrB,GAAG,CAACjB,UAAU,GAAG,UAAUuC,KAAK,EAAE;UAChCF,cAAc,CAAC,UAAU,EAAEE,KAAK,CAAC;QACnC,CAAC;QACD,IAAItB,GAAG,CAAC0B,MAAM,EAAE;UACd1B,GAAG,CAAC0B,MAAM,CAAC3C,UAAU,GAAG,UAAUuC,KAAK,EAAE;YACvCF,cAAc,CAAC,QAAQ,EAAEE,KAAK,CAAC;UACjC,CAAC;QACH;MACF;MACAtB,GAAG,CAACf,IAAI,CAACtB,MAAM,EAAEC,GAAG,EAAE,IAAI,CAAC;MAC3B,KAAK,IAAI+D,CAAC,IAAI7D,OAAO,EAAE;QACrBkC,GAAG,CAAC4B,gBAAgB,CAACD,CAAC,EAAE7D,OAAO,CAAC6D,CAAC,CAAC,CAAC;MACrC;MACA3B,GAAG,CAAC6B,OAAO,GAAG,YAAY;QACxBtC,OAAO,CAACvB,OAAO,CAAC;UACdI,QAAQ,EAAE;YACR0D,OAAO,EAAE;UACX,CAAC;UACD1B,MAAM,EAAE,CAAC;UACTJ,GAAG,EAAEA;QACP,CAAC,CAAC;MACJ,CAAC;MACDA,GAAG,CAACd,IAAI,CAACrB,IAAI,CAAC;MACd,IAAIE,OAAO,IAAI,OAAOA,OAAO,CAACoB,WAAW,KAAK,UAAU,EAAE;QACxDpB,OAAO,CAACoB,WAAW,CAACa,GAAG,CAAC;MAC1B;IACF,CAAC,EAAE,CAAC;IACJ,OAAOT,OAAO;EAChB,CAAC;EACDwC,OAAO,EAAE,SAASA,OAAOA,CAACpE,MAAM,CAAC,cAAcqE,IAAI,CAAC,cAAcnE,IAAI,CAAC,aAAaE,OAAO,CAAC,0BAA0B;IACpHA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIH,GAAG,GAAG/B,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,YAAY,CAAC;IAChD,IAAI9B,GAAG,CAACA,GAAG,CAACd,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;MAC/Bc,GAAG,IAAI,GAAG;IACZ;IACAA,GAAG,IAAIoE,IAAI;IACX,IAAIC,OAAO,GAAG,CAAC,CAAC;IAChB,IAAIpE,IAAI,IAAI,CAAC,CAAC,EAAEtC,QAAQ,CAAC6B,OAAO,EAAES,IAAI,CAAC,KAAK,QAAQ,EAAE;MACpD,KAAK,IAAIqE,CAAC,IAAIrE,IAAI,EAAE;QAClBoE,OAAO,CAACC,CAAC,CAAC,GAAGrE,IAAI,CAACqE,CAAC,CAAC;MACtB;IACF;;IAEA;IACA,IAAIC,OAAO,GAAGpE,OAAO,CAACoE,OAAO;IAC7B,IAAIA,OAAO,KAAKC,SAAS,EAAE;MACzBH,OAAO,CAAC3C,QAAQ,GAAG6C,OAAO;IAC5B;IACA,IAAIxE,MAAM,KAAK,MAAM,EAAE;MACrBsE,OAAO,CAACI,OAAO,GAAG1E,MAAM;MACxBA,MAAM,GAAG,MAAM;IACjB;IACAsE,OAAO,CAACK,cAAc,GAAGzG,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,gBAAgB,CAAC;IACnE,IAAI6C,KAAK,GAAG1G,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,gBAAgB,CAAC;IACtD,IAAI6C,KAAK,EAAE;MACTN,OAAO,CAACO,cAAc,GAAGD,KAAK;IAChC;IACAN,OAAO,CAACQ,cAAc,GAAG5G,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,SAAS,CAAC;IAC5D,IAAIgD,YAAY,GAAG3E,OAAO,CAAC2E,YAAY;IACvC,IAAI,OAAOA,YAAY,KAAK,WAAW,EAAE;MACvCA,YAAY,GAAG7G,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,gBAAgB,CAAC;IAC3D;IACA,IAAIgD,YAAY,EAAE;MAChB,IAAI7G,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,YAAY,CAAC,EAAE;QAC1C,OAAOuC,OAAO,CAACO,cAAc;QAC7BP,OAAO,CAACU,UAAU,GAAG9G,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,YAAY,CAAC;MAC7D,CAAC,MAAM;QACL,MAAM,IAAII,KAAK,CAAC,sDAAsD,CAAC;MACzE;IACF;IACA,IAAIjE,YAAY,CAACuB,OAAO,CAACsC,GAAG,CAAC,yBAAyB,CAAC,EAAE;MACvDuC,OAAO,CAACW,iBAAiB,GAAG,GAAG;IACjC;IACA,IAAIC,cAAc,GAAG9E,OAAO,CAAC8E,cAAc;IAC3C,IAAIC,qBAAqB;IACzB,IAAID,cAAc,IAAI,OAAOA,cAAc,KAAK,QAAQ,EAAE;MACxDC,qBAAqB,GAAGtH,QAAQ,CAAC4B,OAAO,CAACY,OAAO,CAAC6E,cAAc,CAAC;IAClE,CAAC,MAAM;MACL,IAAIE,sBAAsB,GAAGlH,YAAY,CAACuB,OAAO,CAAC4F,yBAAyB,CAAC,CAAC;MAC7EF,qBAAqB,GAAGC,sBAAsB,CAACE,qBAAqB,CAAC,CAAC;IACxE;IACA,OAAOH,qBAAqB,CAACI,IAAI,CAAC,UAAUC,GAAG,EAAE;MAC/ClB,OAAO,CAACmB,eAAe,GAAGD,GAAG;MAC7B,IAAIE,cAAc,GAAGxH,YAAY,CAACuB,OAAO,CAACkG,iBAAiB,CAAC,CAAC;MAC7D,IAAIvF,OAAO,IAAI,OAAOA,OAAO,CAACwF,YAAY,KAAK,QAAQ,EAAE;QACvD,OAAO/H,QAAQ,CAAC4B,OAAO,CAACY,OAAO,CAACD,OAAO,CAACwF,YAAY,CAAC;MACvD,CAAC,MAAM,IAAIF,cAAc,EAAE;QACzB,OAAOA,cAAc,CAACG,gBAAgB,CAAC,CAAC,CAACN,IAAI,CAAC,UAAUO,IAAI,EAAE;UAC5D,IAAIA,IAAI,EAAE;YACR,OAAOjI,QAAQ,CAAC4B,OAAO,CAACY,OAAO,CAACyF,IAAI,CAACC,eAAe,CAAC,CAAC,CAAC;UACzD;UACA,OAAOlI,QAAQ,CAAC4B,OAAO,CAACY,OAAO,CAAC,IAAI,CAAC;QACvC,CAAC,CAAC;MACJ;MACA,OAAOxC,QAAQ,CAAC4B,OAAO,CAACY,OAAO,CAAC,IAAI,CAAC;IACvC,CAAC,CAAC,CAACkF,IAAI,CAAC,UAAUS,KAAK,EAAE;MACvB,IAAIA,KAAK,EAAE;QACT1B,OAAO,CAAC2B,aAAa,GAAGD,KAAK;MAC/B;MACA,IAAIE,aAAa,GAAG,CAAC,CAAC,EAAEpI,UAAU,CAAC2B,OAAO,EAAE6E,OAAO,CAAC;MACpD,OAAO7C,cAAc,CAACC,IAAI,CAAC1B,MAAM,EAAEC,GAAG,EAAEiG,aAAa,EAAE,CAAC,CAAC,EAAE9F,OAAO,CAAC,CAACmF,IAAI,CAAC,UAAUY,IAAI,EAAE;QACvF,IAAI1F,QAAQ,GAAG0F,IAAI,CAAC1F,QAAQ;UAC1BgC,MAAM,GAAG0D,IAAI,CAAC1D,MAAM;UACpBtC,OAAO,GAAGgG,IAAI,CAAChG,OAAO;UACtBkC,GAAG,GAAG8D,IAAI,CAAC9D,GAAG;QAChB,IAAIjC,OAAO,CAACgG,YAAY,EAAE;UACxB,OAAOrH,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE0B,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE;YACpD4F,OAAO,EAAE5D,MAAM;YACf6D,QAAQ,EAAEnG,OAAO;YACjBoG,IAAI,EAAElE;UACR,CAAC,CAAC;QACJ,CAAC,MAAM;UACL,OAAO5B,QAAQ;QACjB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC+F,KAAK,CAAC/E,cAAc,CAACgF,WAAW,CAAC;EACtC,CAAC;EACDA,WAAW,EAAE,SAASA,WAAWA,CAAChG,QAAQ,EAAE;IAC1C;IACA;IACA,IAAIU,KAAK;IACT,IAAIV,QAAQ,IAAIA,QAAQ,CAACG,YAAY,EAAE;MACrC,IAAI;QACF,IAAI8F,SAAS,GAAGhG,IAAI,CAACC,KAAK,CAACF,QAAQ,CAACG,YAAY,CAAC;QACjDO,KAAK,GAAG,IAAIhD,WAAW,CAACsB,OAAO,CAACiH,SAAS,CAACzF,IAAI,EAAEyF,SAAS,CAACvF,KAAK,CAAC;MAClE,CAAC,CAAC,OAAON,CAAC,EAAE;QACV;QACAM,KAAK,GAAG,IAAIhD,WAAW,CAACsB,OAAO,CAACtB,WAAW,CAACsB,OAAO,CAACkH,YAAY,EAAE,kDAAkD,GAAGlG,QAAQ,CAACG,YAAY,CAAC;MAC/I;IACF,CAAC,MAAM;MACL,IAAIgG,OAAO,GAAGnG,QAAQ,CAACmG,OAAO,GAAGnG,QAAQ,CAACmG,OAAO,GAAGnG,QAAQ;MAC5DU,KAAK,GAAG,IAAIhD,WAAW,CAACsB,OAAO,CAACtB,WAAW,CAACsB,OAAO,CAACoH,iBAAiB,EAAE,yBAAyB,GAAG,CAAC,CAAC,EAAE/I,UAAU,CAAC2B,OAAO,EAAEmH,OAAO,CAAC,CAAC;IACtI;IACA,OAAO/I,QAAQ,CAAC4B,OAAO,CAACa,MAAM,CAACa,KAAK,CAAC;EACvC,CAAC;EACD2F,OAAO,EAAE,SAASA,OAAOA,CAACzE,GAAG,CAAC,WAAW;IACvC1C,GAAG,GAAG0C,GAAG;EACX,CAAC;EACD0E,OAAO,EAAE,SAASA,OAAOA,CAAA,EAAG;IAC1B,OAAOpH,GAAG;EACZ;AACF,CAAC;AACDqH,MAAM,CAACC,OAAO,GAAGxF,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}